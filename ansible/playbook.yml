---
- name: Installation de Docker sur les VM
  hosts: manager:workers
  become: yes
  roles:
    - docker


- name: Initialize Docker Swarm
  hosts: manager:workers
  become: yes
  roles:
    - swarm

- name: Déployer Traefik sur le Swarm
  hosts: manager:workers
  become: yes
  roles:
    - traefik

- name: Déployer Prometheus sur le Swarm
  hosts: manager:workers
  become: yes
  roles:
      - prometheus